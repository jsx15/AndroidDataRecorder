@page "/Pi"
@using AndroidDataRecorder.Misc
@layout PiLayout
<div class="master">
    <div class="row p-3">
        <div class="col-sm-6">
            <div class="card">
                <button class="btn @BtnColor text-center top-row" @onclick="toggleBtn">@BtnText</button>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="card">
                <button class="btn btn-primary text-center top-row">Set Marker</button>
            </div>
        </div>
    </div>

    <div class="row p-3">
        <div class="col-sm-6">
            <div class="card">
                <div class="table-wrapper-scroll-y scroll-bar second-row">
                    <table class="table table-striped table-sm">
                        <thead>
                        <tr>
                            <th scope="col">Time</th>
                            <th scope="col">Message</th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach (var marker in liste)
                        {
                            <tr>
                                <td style="width: 40%">@marker._markerTime</td>
                                <td>@marker._markerMessage</td>
                            </tr>
                        }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="card second-row">
                <div class="card-body ">
                    <div class="row">
                        <div class="col-md-4 text-left">
                            <div>CPU: </div>
                        </div>
                        <div class="col-md-8">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped" style="width: 12%" role="progressbar" aria-valuenow="12" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 text-left">
                            <div>Memory: </div>
                        </div>
                        <div class="col-md-8">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped" style="width: 25%" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>

                </div>


            </div>
        </div>
    </div>
</div>


@code {
    private bool _togglebtn;
    private string BtnColor => _togglebtn ? "btn-danger" : "btn-success";
    private string BtnText => _togglebtn ? "Stop Logging" : "Start Logging";


    private void toggleBtn()
    {
        _togglebtn = !_togglebtn;
    }

    List<Marker> liste = new();

    protected override void OnInitialized()
    {
        base.OnInitialized();

    }

}